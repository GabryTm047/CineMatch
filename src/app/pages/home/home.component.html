<section class="home">
  <header class="hero">
    <div class="hero-text">
      <p class="eyebrow">
        Ciao,
        <span>{{ user()?.name || 'cinematofilo' }}</span>
      </p>
      <h1>
        Scopri il mix perfetto di generi per la tua prossima visione
      </h1>
      <p class="lead">
        Rispondi a 10 domande mirate sui tuoi gusti attuali: CineMatch ti dira i generi che ami di più in base il mood attuale.
      </p>
      <div class="buttons">
        <button type="button" class="primary" (click)="startQuiz()">Inizia qui</button>
        <button type="button" class="ghost" (click)="logout()">Esci</button>
      </div>
      @if (user()?.isGuest) {
        <p class="guest-hint">
          Stai esplorando come ospite. Registrati per salvare i risultati in seguito
        </p>
      }
    </div>

    <div class="hero-card">
      <div class="card-title">Come funziona?</div>
      <ul>
        <li>
          <span class="badge">1</span>
          Rispondi a domande rapide sui tuoi interessi
        </li>
        <li>
          <span class="badge">2</span>
          Scopri i tuoi gusti tramite un grafico a torta
        </li>
        <li>
          <span class="badge">3</span>
          Scegli il film che matcha di più con te stasera
        </li>
      </ul>
    </div>
  </header>

  <section class="highlights">
    <article>
      <h2>Domande studiate dai nostri esperti</h2>
      <p>
        Ogni risposta associa emozioni, ritmo e atmosfere ai corrispondenti generi cinematografici.
        In meno di cinque minuti ottieni un profilo accurato dei tuoi gusti.
      </p>
    </article>
    <article>
      <h2>Grafico finale immediato</h2>
      <p>
        Visualizza le percentuali in un grafico a torta elegante e condivisibile, ideale per decidere rapidamente cosa guardare con amici o famiglia.
      </p>
    </article>
    <article>
      <h2>Risultati sempre aggiornati</h2>
      <p>
        Puoi rifare il test ogni volta che vuoi: CineMatch aggiorna il tuo profilo in base al momento e all'umore della serata.
      </p>
    </article>
  </section>

  <!-- <section class="results-lists">
    <div class="results-block">
      <h2>I miei ultimi quiz</h2>
      <ul>
        <li *ngFor="let r of myResults()">
          <span>{{ r.createdAt?.toDate ? (r.createdAt.toDate() | date:'short') : '' }}</span>
          — <strong>{{ r.name || r.email || 'Utente' }}</strong>
          — {{ r.breakdown?.[0]?.label || 'N/D' }} ({{ r.breakdown?.[0]?.percentage || 0 }}%)
        </li>
      </ul>
    </div>

    <div class="results-block">
      <h2>Ultimi quiz di tutti</h2>
      <ul>
        <li *ngFor="let r of latestResults()">
          <span>{{ r.createdAt?.toDate ? (r.createdAt.toDate() | date:'short') : '' }}</span>
          — <strong>{{ r.name || r.email || 'Utente' }}</strong>
          — {{ r.breakdown?.[0]?.label || 'N/D' }} ({{ r.breakdown?.[0]?.percentage || 0 }}%)
        </li>
      </ul>
    </div>
  </section> -->
</section>
